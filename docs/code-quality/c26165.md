---
title: C26165
ms.date: 11/04/2016
ms.topic: reference
f1_keywords:
- C26165
helpviewer_keywords:
- C26165
ms.assetid: a1d89bd6-08f3-4215-8a0c-b8ecfeb0cffc
author: mikeblome
ms.author: mblome
manager: markl
ms.workload:
- multiple
ms.openlocfilehash: a4ca0dc6c87c8d39534867237e702c8e255174d2
ms.sourcegitcommit: 535ef05b1e553f0fc66082cd2e0998817eb2a56a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/07/2019
ms.locfileid: "72015608"
---
# <a name="c26165"></a>C26165
C26165 de ADVERTENCIA: Es posible que no se pueda liberar el bloqueo \<lock > en la > de la funci贸n \<func.

 La advertencia C26165 es similar a la advertencia [C26115](../code-quality/c26115.md) , salvo que el nivel de confianza es inferior. Por ejemplo, la funci贸n puede contener errores de anotaci贸n.

## <a name="example"></a>Ejemplo
 El c贸digo siguiente genera la advertencia C26165.

```cpp

_Create_lock_level_(LockLevelOne);
_Create_lock_level_(LockLevelTwo);

struct LockLevelledStruct
{
    _Has_lock_level_(LockLevelOne) CRITICAL_SECTION a;
    _Has_lock_level_(LockLevelTwo) CRITICAL_SECTION b;
};

_Lock_level_order_(LockLevelOne, LockLevelTwo);

_Acquires_lock_(s->b) void GetLockFunc(LockLevelledStruct* s)
{
    EnterCriticalSection(&s->b);
}

void testLockLevelledStruct(LockLevelledStruct* s) // Warning C26165
{
    EnterCriticalSection(&s->a);
    GetLockFunc(s);
    LeaveCriticalSection(&s->a);
}
```

## <a name="example"></a>Ejemplo
 Para corregir esta advertencia, cambie el ejemplo anterior a lo siguiente.

```cpp

_Create_lock_level_(LockLevelOne);
_Create_lock_level_(LockLevelTwo);

struct LockLevelledStruct
{
    _Has_lock_level_(LockLevelOne) CRITICAL_SECTION a;
    _Has_lock_level_(LockLevelTwo) CRITICAL_SECTION b;
};

_Lock_level_order_(LockLevelOne, LockLevelTwo);

_Acquires_lock_(s->b) void GetLockFunc(LockLevelledStruct* s)
{
    EnterCriticalSection(&s->b);
}

_Releases_lock_(s->b) void ReleaseLockFunc(LockLevelledStruct* s)
{
    LeaveCriticalSection(&s->b);
}

void testLockLevelledStruct(LockLevelledStruct* s) // OK
{
    EnterCriticalSection(&s->a);
    GetLockFunc(s);
    ReleaseLockFunc(s);
    LeaveCriticalSection(&s->a);
}
```