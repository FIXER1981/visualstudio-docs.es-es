---
title: 'CA1305: Especificar IFormatProvider'
ms.date: 06/30/2018
ms.topic: reference
f1_keywords:
- SpecifyIFormatProvider
- CA1305
helpviewer_keywords:
- CA1305
- SpecifyIFormatProvider
ms.assetid: fb34ed9a-4eab-47cc-8eef-3068a4a1397e
author: mikejo5000
ms.author: mikejo
manager: jillfra
dev_langs:
- CSharp
ms.workload:
- multiple
ms.openlocfilehash: a2ea6ab9364e2e183b782f4d3084cd2b5eb6dd45
ms.sourcegitcommit: ade07bd1cf69b8b494d171ae648cfdd54f7800d3
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/21/2020
ms.locfileid: "81649158"
---
# <a name="ca1305-specify-iformatprovider"></a>CA1305: Especificar IFormatProvider

|||
|-|-|
|TypeName|SpecifyIFormatProvider|
|Identificador de comprobación|CA1305|
|Categoría|Microsoft.Globalization|
|Cambio importante|Poco problemático|

## <a name="cause"></a>Causa

Un método o constructor llama a uno o <xref:System.IFormatProvider?displayProperty=fullName> varios miembros que tienen sobrecargas que aceptan <xref:System.IFormatProvider> un parámetro y el método o constructor no llama a la sobrecarga que toma el parámetro.

Esta regla omite las llamadas a métodos <xref:System.IFormatProvider> .NET que se documentan como ignorar el parámetro. La regla también omite los métodos siguientes:

- <xref:System.Activator.CreateInstance%2A?displayProperty=nameWithType>
- <xref:System.Resources.ResourceManager.GetObject%2A?displayProperty=nameWithType>
- <xref:System.Resources.ResourceManager.GetString%2A?displayProperty=nameWithType>
- <xref:System.Boolean.ToString%2A?displayProperty=nameWithType>
- <xref:System.Char.ToString%2A?displayProperty=nameWithType>
- <xref:System.Guid.ToString%2A?displayProperty=nameWithType>

## <a name="rule-description"></a>Descripción de la regla

Cuando <xref:System.Globalization.CultureInfo?displayProperty=nameWithType> no <xref:System.IFormatProvider> se proporciona un objeto o, es posible que el valor predeterminado proporcionado por el miembro sobrecargado no tenga el efecto que desea en todas las configuraciones regionales. Además, los miembros de .NET eligen la referencia cultural y el formato predeterminados en función de suposiciones que podrían no ser correctas para el código. Para asegurarse de que el código funciona según lo esperado para sus escenarios, debe proporcionar información específica de la referencia cultural de acuerdo con las siguientes directrices:

- Si el valor se mostrará al usuario, utilice la referencia cultural actual. Vea <xref:System.Globalization.CultureInfo.CurrentCulture%2A?displayProperty=nameWithType>.

- Si el software almacenará y accederá al valor (persistirá en un archivo o base de datos), utilice la referencia cultural invariable. Vea <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>.

- Si no conoce el destino del valor, haga que el consumidor o proveedor de datos especifique la referencia cultural.

Incluso si el comportamiento predeterminado del miembro sobrecargado es adecuado para sus necesidades, es mejor llamar explícitamente a la sobrecarga específica de la referencia cultural para que el código se autodocumente y se mantenga más fácilmente.

## <a name="how-to-fix-violations"></a>Cómo corregir infracciones

Para corregir una infracción de esta regla, utilice la sobrecarga que toma un <xref:System.IFormatProvider> argumento. O bien, utilice una [cadena interpolada](/dotnet/csharp/tutorials/string-interpolation) <xref:System.FormattableString.Invariant%2A?displayProperty=nameWithType> de C- y pásela al método.

## <a name="when-to-suppress-warnings"></a>Cuándo suprimir las advertencias

Es seguro suprimir una advertencia de esta regla cuando está seguro de que el formato predeterminado es la opción correcta y donde la mantenibilidad del código no es una prioridad de desarrollo importante.

## <a name="example"></a>Ejemplo

En el código `example1` siguiente, la cadena infringe la regla CA1305. La `example2` cadena satisface la regla CA1305 <xref:System.Globalization.CultureInfo.CurrentCulture%2A?displayProperty=nameWithType> <xref:System.IFormatProvider>pasando <xref:System.String.Format(System.IFormatProvider,System.String,System.Object)?displayProperty=nameWithType>, que implementa , a . La `example3` cadena satisface la regla CA1305 pasando <xref:System.FormattableString.Invariant%2A?displayProperty=fullName]>una cadena interpolada a .

```csharp
string name = "Georgette";

// Violates CA1305
string example1 = String.Format("Hello {0}", name);

// Satisfies CA1305
string example2 = String.Format(CultureInfo.CurrentCulture, "Hello {0}", name);

// Satisfies CA1305
string example3 = FormattableString.Invariant($"Hello {name}");
```

## <a name="related-rules"></a>Reglas relacionadas

- [CA1304: Especificar CultureInfo](../code-quality/ca1304.md)

## <a name="see-also"></a>Consulte también

- [Uso de la clase CultureInfo](/dotnet/standard/globalization-localization/globalization#work-with-culture-specific-settings)
