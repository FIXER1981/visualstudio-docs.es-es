---
title: 'CA5397: no usar valores SslProtocols desusados'
description: Proporciona información sobre la regla de análisis de código CA5397, incluidas las causas, cómo corregir las infracciones y cuándo suprimirlas.
ms.date: 08/14/2019
ms.topic: reference
author: dotpaul
ms.author: paulming
manager: jillfra
dev_langs:
- CSharp
- VB
ms.workload:
- multiple
f1_keywords:
- CA5397
ms.openlocfilehash: 31009008872e981b5e5769fa3ae2aba6d00f2e58
ms.sourcegitcommit: 5421999c9ff05b3242d33e4b0465f8bc29c7c643
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2020
ms.locfileid: "75718615"
---
# <a name="ca5397-do-not-use-deprecated-sslprotocols-values"></a>CA5397: no usar valores SslProtocols desusados

|||
|-|-|
|TypeName|SslProtocolsAnalyzer|
|Identificador de comprobación|CA5397|
|Categoría|Microsoft.Security|
|Cambio importante|Poco problemático|

## <a name="cause"></a>Motivo

Esta regla se desencadena cuando se cumple alguna de las siguientes condiciones:
- Se hizo referencia A un valor de <xref:System.Security.Authentication.SslProtocols?displayProperty=nameWithType> en desuso.
- Un valor entero que representa un valor en desuso se asignó a una variable de <xref:System.Security.Authentication.SslProtocols>, se utiliza como valor devuelto de <xref:System.Security.Authentication.SslProtocols> o se usa como un argumento de <xref:System.Security.Authentication.SslProtocols>.

Los valores en desuso son:
- Ssl2
- Ssl3
- Empleo
- Tls10
- Tls11

## <a name="rule-description"></a>Descripción de la regla

La seguridad de la capa de transporte (TLS) protege la comunicación entre equipos, normalmente con el protocolo seguro de transferencia de hipertexto (HTTPS). Las versiones de protocolo anteriores de TLS son menos seguras que las de TLS 1,2 y TLS 1,3 y es más probable que tengan nuevas vulnerabilidades. Evite las versiones anteriores del protocolo para minimizar el riesgo. Para obtener instrucciones sobre cómo identificar y quitar versiones de protocolo en desuso, vea [resolver el problema de TLS 1,0, 2ª edición](/security/solving-tls1-problem).

## <a name="how-to-fix-violations"></a>Cómo corregir infracciones

No use versiones de protocolo TLS en desuso.

## <a name="when-to-suppress-warnings"></a>Cuándo suprimir advertencias

Puede suprimir esta advertencia si:
- La referencia a la versión de protocolo en desuso no se usa para habilitar una versión en desuso.
- Debe conectarse a un servicio heredado que no se puede actualizar para usar configuraciones TLS seguras.

## <a name="pseudo-code-examples"></a>Ejemplos de pseudocódigo

### <a name="enumeration-name-violation"></a>Infracción de nombre de enumeración

```csharp
using System;
using System.Security.Authentication;

public class ExampleClass
{
    public void ExampleMethod()
    {
        // CA5397 violation for using Tls11
        SslProtocols protocols = SslProtocols.Tls11 | SslProtocols.Tls12;
    }
}
```

```vb
Imports System
Imports System.Security.Authentication

Public Class TestClass
    Public Sub ExampleMethod()
        ' CA5397 violation for using Tls11
        Dim sslProtocols As SslProtocols = SslProtocols.Tls11 Or SslProtocols.Tls12
    End Sub
End Class
```

### <a name="integer-value-violation"></a>Infracción de valor entero

```csharp
using System;
using System.Security.Authentication;

public class ExampleClass
{
    public void ExampleMethod()
    {
        // CA5397 violation
        SslProtocols sslProtocols = (SslProtocols) 768;    // TLS 1.1
    }
}
```

```vb
Imports System
Imports System.Security.Authentication

Public Class TestClass
    Public Sub ExampleMethod()
        ' CA5397 violation
        Dim sslProtocols As SslProtocols = CType(768, SslProtocols)   ' TLS 1.1
    End Sub
End Class
```

### <a name="solution"></a>Solución

```csharp
using System;
using System.Security.Authentication;

public class TestClass
{
    public void Method()
    {
        // With .NET Framework 4.7 or later, let the operating system decide what TLS protocol version to use.
        // See https://docs.microsoft.com/dotnet/framework/network-programming/tls
        SslProtocols sslProtocols = SslProtocols.None;
    }
}
```

```vb
Imports System
Imports System.Security.Authentication

Public Class TestClass
    Public Sub ExampleMethod()
        ' With .NET Framework 4.7 or later, let the operating system decide what TLS protocol version to use.
        ' See https://docs.microsoft.com/dotnet/framework/network-programming/tls
        Dim sslProtocols As SslProtocols = SslProtocols.None
    End Sub
End Class
```

## <a name="related-rules"></a>Reglas relacionadas

[CA5364: no usar protocolos de seguridad en desuso](ca5364.md)

[CA5386: evitar el valor de codificar SecurityProtocolType](ca5386.md)

[CA5398: Evite valores SslProtocols codificados](ca5398.md)
