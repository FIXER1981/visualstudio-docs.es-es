---
title: 'CA1070: No declarar los campos de eventos como virtuales'
ms.date: 04/30/2020
ms.topic: reference
f1_keywords:
- CA1070
helpviewer_keywords:
- CA1070
author: mavasani
ms.author: mavasani
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: 3139443d2cbce8c59053c54a65065497da3f9b19
ms.sourcegitcommit: de98ed7edc81383e47b87ae6e61143fbbbe7bc56
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/21/2020
ms.locfileid: "88710811"
---
# <a name="ca1070-do-not-declare-event-fields-as-virtual"></a>CA1070: No declarar los campos de eventos como virtuales

|Elemento|Valor|
|-|-|
|Identificador de comprobación|CA1070|
|Category|Microsoft. Design|
|Cambio importante|Problemático|

## <a name="cause"></a>Causa

Un [evento similar](/dotnet/csharp/language-reference/language-specification/classes#field-like-events) a un campo se declaró como virtual.

De forma predeterminada, esta regla solo examina los tipos visibles externamente, pero esto es [configurable](#configurability).

## <a name="rule-description"></a>Descripción de la regla

Siga estas [instrucciones de diseño de .net](/dotnet/csharp/programming-guide/events/how-to-raise-base-class-events-in-derived-classes) para generar eventos de clase base en clases derivadas. No declare eventos virtuales en una clase base. Los eventos invalidados en una clase derivada tienen un comportamiento indefinido. El compilador de C# no lo controla correctamente y es imprevisible si un suscriptor del evento derivado se va a suscribir realmente al evento de la clase base.

```csharp
using System;
public class C
{
    // CA1070: Event 'ThresholdReached' should not be declared virtual.
    public virtual event EventHandler ThresholdReached;
}
```

## <a name="how-to-fix-violations"></a>Cómo corregir infracciones

Siga estas [instrucciones de diseño de .net](/dotnet/csharp/programming-guide/events/how-to-raise-base-class-events-in-derived-classes) y evite eventos virtuales similares a los campos.

## <a name="when-to-suppress-warnings"></a>Cuándo suprimir advertencias

Si el evento es una API pública externamente visible que ya forma parte de una biblioteca enviada, es seguro suprimir una advertencia de esta regla para evitar un cambio importante para los consumidores de la biblioteca.

## <a name="configurability"></a>Configurabilidad

Puede configurar en qué partes del código base ejecutar esta regla, en función de su accesibilidad. Por ejemplo, para especificar que la regla se debe ejecutar solo en la superficie de API no pública, agregue el siguiente par clave-valor a un archivo. editorconfig en el proyecto:

```ini
dotnet_code_quality.ca1070.api_surface = private, internal
```

Puede configurar esta opción solo para esta regla, para todas las reglas o para todas las reglas de esta categoría (diseño). Para obtener más información, vea [configurar los analizadores de calidad de código de .net](configure-fxcop-analyzers.md).

## <a name="see-also"></a>Consulte también

- [Advertencias de diseño](design-warnings.md)
