---
title: 'CA2008: No crear tareas sin pasar un elemento TaskScheduler'
ms.date: 08/26/2020
ms.topic: reference
f1_keywords:
- CA2008
- DoNotCreateTasksWithoutPassingATaskSchedulerAnalyzer
helpviewer_keywords:
- CA2008
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.openlocfilehash: 08e4a43a6af19fd3a6708a3de92616ff39f2df36
ms.sourcegitcommit: a18c7e9b367c2f92f6e54c3eaef442775d457667
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/15/2020
ms.locfileid: "90098846"
---
# <a name="ca2008-do-not-create-tasks-without-passing-a-taskscheduler"></a>CA2008: No crear tareas sin pasar un elemento TaskScheduler

|Elemento|Valor|
|-|-|
|RuleId|CA2008|
|Category|Microsoft.Reliability|
|Cambio importante|Poco problemático|

## <a name="cause"></a>Causa

Una operación de creación o continuación de tareas utiliza una sobrecarga de método que no especifica un <xref:System.Threading.Tasks.TaskScheduler> parámetro.

## <a name="rule-description"></a>Descripción de la regla

Los siguientes métodos de creación y continuación de tareas en el .NET Framework tienen sobrecargas que permiten especificar u omitir una <xref:System.Threading.Tasks.TaskScheduler> instancia de:
- <xref:System.Threading.Tasks.TaskFactory.StartNew%2A?displayProperty=fullName> modalidades 
- <xref:System.Threading.Tasks.Task.ContinueWith%2A?displayProperty=fullName> modalidades

Especifique siempre un <xref:System.Threading.Tasks.TaskScheduler> argumento explícito para evitar el <xref:System.Threading.Tasks.TaskScheduler.Current%2A> valor predeterminado, cuyo comportamiento lo define el autor de la llamada y puede variar en tiempo de ejecución. <xref:System.Threading.Tasks.TaskScheduler.Current%2A> Devuelve el programador asociado a cualquier objeto que <xref:System.Threading.Tasks.Task> se esté ejecutando actualmente en ese subproceso. Si no hay ninguna tarea, devuelve <xref:System.Threading.Tasks.TaskScheduler.Default%2A> , que representa el grupo de subprocesos. El uso <xref:System.Threading.Tasks.TaskScheduler.Current%2A> de puede provocar interbloqueos o problemas de capacidad de respuesta de la interfaz de usuario en algunas situaciones, cuando se diseñó para crear la tarea en el grupo de subprocesos, pero en su lugar espera volver a entrar en el subproceso de la interfaz de usuario.

Para obtener más información y ejemplos detallados, consulte [este artículo](https://devblogs.microsoft.com/pfxteam/new-taskcreationoptions-and-taskcontinuationoptions-in-net-4-5/).

> [!NOTE]
> [VSTHRD105: Evite sobrecargas de método que asuman TaskScheduler. Current](https://github.com/microsoft/vs-threading/blob/master/doc/analyzers/VSTHRD105.md) es una regla similar implementada en el paquete [Microsoft. VisualStudio. Threading. analizadores](https://www.nuget.org/packages/Microsoft.VisualStudio.Threading.Analyzers) .

## <a name="how-to-fix-violations"></a>Cómo corregir infracciones

Para corregir las infracciones, llame a la sobrecarga del método que toma un <xref:System.Threading.Tasks.TaskScheduler> y pase explícitamente <xref:System.Threading.Tasks.TaskScheduler.Default%2A> o <xref:System.Threading.Tasks.TaskScheduler.Current%2A> para que la intención sea clara.

## <a name="when-to-suppress-warnings"></a>Cuándo suprimir advertencias

Esta advertencia está destinada principalmente a las bibliotecas, donde el código se puede ejecutar en entornos arbitrarios y donde el código no debe realizar suposiciones sobre el entorno o cómo el llamador del método puede invocar o esperar en él. Puede ser adecuado suprimir la advertencia para los proyectos que representan código de aplicación en lugar de código de biblioteca.

## <a name="see-also"></a>Consulte también

- [Nuevo TaskCreationOptions y TaskContinuationOptions en .NET 4,5](https://devblogs.microsoft.com/pfxteam/new-taskcreationoptions-and-taskcontinuationoptions-in-net-4-5/)
- [VSTHRD105: Evite sobrecargas de método que asuman TaskScheduler. Current.](https://github.com/microsoft/vs-threading/blob/master/doc/analyzers/VSTHRD105.md)
- [CA2007: No esperar una tarea directamente](ca2007.md)
- [Advertencias de confiabilidad](reliability-warnings.md)
