---
title: 'CA2012: Usar ValueTasks correctamente'
ms.date: 06/18/2020
ms.topic: reference
f1_keywords:
- UseValueTasksCorrectly
- CA2012
helpviewer_keywords:
- UseValueTasksCorrectly
- CA2012
author: stephentoub
ms.author: stoub
manager: jeffhand
ms.workload:
- multiple
ms.openlocfilehash: e5f3791414afc63f2647885feb2b7fac1d624e58
ms.sourcegitcommit: a18c7e9b367c2f92f6e54c3eaef442775d457667
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/15/2020
ms.locfileid: "90098820"
---
# <a name="ca2012-use-valuetasks-correctly"></a>CA2012: Usar ValueTasks correctamente

|Elemento|Valor|
|-|-|
|RuleId|CA2012|
|Category|Microsoft.Reliability|
|Cambio importante|Poco problemático|

## <a name="cause"></a>Causa

Una <xref:System.Threading.Tasks.ValueTask> instancia devuelta de una invocación de miembro se utiliza de forma que pueda provocar excepciones, daños o un rendimiento deficiente.

## <a name="rule-description"></a>Descripción de la regla

<xref:System.Threading.Tasks.ValueTask> las instancias devueltas de las invocaciones de miembro están diseñadas para esperarse directamente.  Los intentos de consumir un ValueTask varias veces o de tener acceso directamente a uno de los resultados antes de que se sepa que se han completado pueden producir una excepción o daños.  Omitir tal ValueTask es probable que se trate de un error funcional y puede degradar el rendimiento.

## <a name="how-to-fix-violations"></a>Cómo corregir infracciones

En general, ValueTasks debe estar directamente en espera en lugar de descartarse o almacenarse en otras ubicaciones, como variables locales o campos.

## <a name="when-to-suppress-warnings"></a>Cuándo suprimir advertencias

En el caso de los ValueTasks devueltos por llamadas de miembro arbitrarias, el autor de la llamada debe asumir que el ValueTask debe consumirse (por ejemplo, en espera) una sola vez.  Sin embargo, si el desarrollador controla también el miembro que se invoca y tiene conocimiento completo de su implementación, es posible que el desarrollador sepa que es seguro suprimir la advertencia, por ejemplo, si el ValueTask devuelto siempre ajusta un <xref:System.Threading.Tasks.Task> objeto.

## <a name="see-also"></a>Consulte también

- [Advertencias de confiabilidad](../code-quality/reliability-warnings.md)
